<!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>Social Feed</title>
Â  Â  <style>
Â  Â  Â  Â  /* --- 1. åŸºç¤è¨­å®š (å®Œå…¨ä¿ç•™åŸæœ¬æ¨£å¼) --- */
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: #F3ECE5; /* ç±³è‰²èƒŒæ™¯ */
Â  Â  Â  Â  Â  Â  color: #000;
Â  Â  Â  Â  Â  Â  padding-bottom: 80px; /* é ç•™åº•éƒ¨ç©ºé–“ */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* éš±è—æ²è»¸ä½†å…è¨±æ²å‹• */
Â  Â  Â  Â  body::-webkit-scrollbar { display: none; }

Â  Â  Â  Â  /* --- 2. è²¼æ–‡å¡ç‰‡ (Post) --- */
Â  Â  Â  Â  .post {
Â  Â  Â  Â  Â  Â  background-color: #F3ECE5; /* èˆ‡èƒŒæ™¯èåˆ */
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  padding-bottom: 15px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid rgba(0,0,0,0.05); /* æ·¡æ·¡çš„åˆ†éš”ç·š */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Header: é ­åƒã€åå­—ã€åœ°é» --- */
Â  Â  Â  Â  .post-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .user-info {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .avatar {
Â  Â  Â  Â  Â  Â  width: 36px;
Â  Â  Â  Â  Â  Â  height: 36px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(0,0,0,0.1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .user-text {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }

Â  Â  Â  Â  .username-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 3px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .username {
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  color: #000;
Â  Â  Â  Â  }

Â  Â  Â  Â  .bell-icon {
Â  Â  Â  Â  Â  Â  color: #E03E3E; /* ç´…è‰²éˆ´éº */
Â  Â  Â  Â  }

Â  Â  Â  Â  .location {
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  }

Â  Â  Â  Â  .more-btn {
Â  Â  Â  Â  Â  Â  color: #000;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Image Slider: å¤šåœ–è¼ªæ’­ --- */
Â  Â  Â  Â  .image-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  aspect-ratio: 4/5; /* IG å¸¸ç”¨çš„é•·æ–¹å½¢æ¯”ä¾‹ */
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  background-color: #e0d5cc; /* åœ–ç‰‡è¼‰å…¥å‰çš„åº•è‰² */
Â  Â  Â  Â  }

Â  Â  Â  Â  .slider {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  overflow-x: scroll;
Â  Â  Â  Â  Â  Â  scroll-snap-type: x mandatory;
Â  Â  Â  Â  Â  Â  scrollbar-width: none; /* Firefox */
Â  Â  Â  Â  }
Â  Â  Â  Â  .slider::-webkit-scrollbar { display: none; } /* Chrome/Safari */

Â  Â  Â  Â  .slide-img {
Â  Â  Â  Â  Â  Â  flex: 0 0 100%;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  scroll-snap-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* å³ä¸Šè§’å¼µæ•¸è¨ˆæ•¸å™¨ (1/3) */
Â  Â  Â  Â  .page-counter {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 15px;
Â  Â  Â  Â  Â  Â  right: 15px;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 4px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Actions: æ„›å¿ƒã€ç•™è¨€ã€å°åœ“é» --- */
Â  Â  Â  Â  .action-bar {
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .left-actions {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 16px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .action-icon {
Â  Â  Â  Â  Â  Â  width: 24px;
Â  Â  Â  Â  Â  Â  height: 24px;
Â  Â  Â  Â  Â  Â  stroke: #000;
Â  Â  Â  Â  Â  Â  fill: none;
Â  Â  Â  Â  Â  Â  stroke-width: 2;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: transform 0.1s;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .action-icon:active { transform: scale(0.9); }

Â  Â  Â  Â  /* æ„›å¿ƒè¢«é»æ“Šå¾Œçš„æ¨£å¼ */
Â  Â  Â  Â  .heart-filled {
Â  Â  Â  Â  Â  Â  fill: #ED4956;
Â  Â  Â  Â  Â  Â  stroke: #ED4956;
Â  Â  Â  Â  Â  Â  animation: pop 0.3s ease-out;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes pop { 0%{transform:scale(1);} 50%{transform:scale(1.2);} 100%{transform:scale(1);} }

Â  Â  Â  Â  /* ä¸­é–“çš„å°åœ“é» (Pagination Dots) */
Â  Â  Â  Â  .dots {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  Â  Â  position: absolute; /* çµ•å°å®šä½è®“å®ƒç½®ä¸­ */
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  Â  }

Â  Â  Â  Â  .dot {
Â  Â  Â  Â  Â  Â  width: 6px;
Â  Â  Â  Â  Â  Â  height: 6px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  background-color: rgba(0,0,0,0.2);
Â  Â  Â  Â  Â  Â  transition: background-color 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .dot.active { background-color: #0089FF; /* IG çš„è—è‰² */ }


Â  Â  Â  Â  /* --- Likes & Comments --- */
Â  Â  Â  Â  .likes-section {
Â  Â  Â  Â  Â  Â  padding: 0 15px;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .like-avatar {
Â  Â  Â  Â  Â  Â  width: 16px;
Â  Â  Â  Â  Â  Â  height: 16px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ç•™è¨€å€ (åŒ…å«ä½œè€…ç™¼æ–‡) --- */
Â  Â  Â  Â  .comments-section {
Â  Â  Â  Â  Â  Â  padding: 0 15px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comment-row {
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comment-user {
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  margin-right: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comment-text {
Â  Â  Â  Â  Â  Â  color: #111;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .timestamp {
Â  Â  Â  Â  Â  Â  font-size: 10px;
Â  Â  Â  Â  Â  Â  color: #888;
Â  Â  Â  Â  Â  Â  margin-top: 4px;
Â  Â  Â  Â  Â  Â  padding: 0 15px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* è¼‰å…¥ä¸­/ç„¡è³‡æ–™æç¤º */
Â  Â  Â  Â  #status-msg {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-top: 50px;
Â  Â  Â  Â  Â  Â  color: #888;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }

Â  Â  </style>
</head>
<body>

Â  Â  <div id="dynamic-feed"></div>

Â  Â  <div id="status-msg">Loading memories...</div>

Â  Â  <script>
Â  Â  Â  Â  // --- 1. è³‡æ–™åº«é€£ç·š (IndexedDB) ---
Â  Â  Â  Â  // é€™æ˜¯è·Ÿä¹‹å‰ã€Œé¦–é ã€èˆ‡ã€Œæ—¥æ›†ã€å®Œå…¨ä¸€æ¨£çš„è¨­å®šï¼Œç¢ºä¿èƒ½æŠ“åˆ°åŒä¸€ä»½è³‡æ–™
Â  Â  Â  Â  const dbName = "MemoriesDB";
Â  Â  Â  Â  const storeName = "photos";
Â  Â  Â  Â  let db;

Â  Â  Â  Â  function initDB() {
Â  Â  Â  Â  Â  Â  return new Promise((resolve, reject) => {
Â  Â  Â  Â  Â  Â  Â  Â  const request = indexedDB.open(dbName, 1);
Â  Â  Â  Â  Â  Â  Â  Â  request.onsuccess = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  db = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(db);
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  request.onerror = (e) => reject(e);
Â  Â  Â  Â  Â  Â  Â  Â  request.onupgradeneeded = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  db = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!db.objectStoreNames.contains(storeName)) db.createObjectStore(storeName);
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function getAllMemories() {
Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!db) return resolve({});
Â  Â  Â  Â  Â  Â  Â  Â  const tx = db.transaction([storeName], "readonly");
Â  Â  Â  Â  Â  Â  Â  Â  const store = tx.objectStore(storeName);
Â  Â  Â  Â  Â  Â  Â  Â  const req = store.get("all_photos");
Â  Â  Â  Â  Â  Â  Â  Â  req.onsuccess = (e) => resolve(e.target.result || {});
Â  Â  Â  Â  Â  Â  Â  Â  req.onerror = () => resolve({});
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- 2. æ¸²æŸ“è²¼æ–‡é‚è¼¯ ---
Â  Â  Â  Â  async function renderFeed() {
Â  Â  Â  Â  Â  Â  await initDB();
Â  Â  Â  Â  Â  Â  const memories = await getAllMemories();
Â  Â  Â  Â  Â  Â  const feedContainer = document.getElementById('dynamic-feed');
Â  Â  Â  Â  Â  Â  const statusMsg = document.getElementById('status-msg');

Â  Â  Â  Â  Â  Â  // æ¸…ç©ºå®¹å™¨
Â  Â  Â  Â  Â  Â  feedContainer.innerHTML = '';

Â  Â  Â  Â  Â  Â  // å–å¾—æ‰€æœ‰æ—¥æœŸä¸¦æ’åº (æ–°çš„æ—¥æœŸåœ¨ä¸Šé¢)
Â  Â  Â  Â  Â  Â  const sortedDates = Object.keys(memories).sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  return new Date(b.replace(/-/g, '/')) - new Date(a.replace(/-/g, '/'));
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (sortedDates.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  statusMsg.innerHTML = "No photos found.<br>Go to Home or Calendar to upload first.";
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  statusMsg.style.display = 'none';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // é‡å°æ¯ä¸€å¤©ç”¢ç”Ÿä¸€ç¯‡è²¼æ–‡
Â  Â  Â  Â  Â  Â  sortedDates.forEach(dateKey => {
Â  Â  Â  Â  Â  Â  Â  Â  const photos = memories[dateKey]; // é€™æ˜¯ä¸€å€‹åŒ…å«ç…§ç‰‡ Base64 çš„é™£åˆ—
Â  Â  Â  Â  Â  Â  Â  Â  if (!photos || photos.length === 0) return;

Â  Â  Â  Â  Â  Â  Â  Â  // ç”¢ç”Ÿå”¯ä¸€çš„ ID (ç”¨æ—¥æœŸå­—ä¸²å»é™¤ç¬¦è™Ÿ)
Â  Â  Â  Â  Â  Â  Â  Â  const postId = dateKey.replace(/-/g, '');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // è½‰æ›æ—¥æœŸæ ¼å¼ (ä¾‹: 2024-12-25 -> December 25, 2024)
Â  Â  Â  Â  Â  Â  Â  Â  const dateObj = new Date(dateKey.replace(/-/g, '/'));
Â  Â  Â  Â  Â  Â  Â  Â  const dateString = dateObj.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

Â  Â  Â  Â  Â  Â  Â  Â  // 1. æº–å‚™åœ–ç‰‡ HTML (Slider)
Â  Â  Â  Â  Â  Â  Â  Â  let slidesHtml = '';
Â  Â  Â  Â  Â  Â  Â  Â  let dotsHtml = '';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  photos.forEach((photoBase64, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  slidesHtml += `<img src="${photoBase64}" class="slide-img">`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // åªæœ‰ç•¶ç…§ç‰‡å¤§æ–¼1å¼µæ™‚æ‰éœ€è¦ç”Ÿæˆ active ç‹€æ…‹çš„é‚è¼¯
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (photos.length > 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dotsHtml += `<div class="dot ${index === 0 ? 'active' : ''}"></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // 2. æº–å‚™è¨ˆæ•¸å™¨ HTML (å¦‚æœåªæœ‰ä¸€å¼µåœ–å°±ä¸é¡¯ç¤º)
Â  Â  Â  Â  Â  Â  Â  Â  const counterHtml = photos.length > 1 ?Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<div class="page-counter" id="counter-${postId}">1/${photos.length}</div>` : '';

Â  Â  Â  Â  Â  Â  Â  Â  // 3. çµ„åˆå®Œæ•´çš„ Post HTML (ä½¿ç”¨ä½ åŸæœ¬çš„ Class)
Â  Â  Â  Â  Â  Â  Â  Â  const postHtml = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="post">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="post-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://i.pravatar.cc/150?img=12" class="avatar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="username-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="username">My Memory</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="bell-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="location">${dateString}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="more-btn"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="image-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${counterHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="slider" id="slider-${postId}" onscroll="updateDots('${postId}', ${photos.length})">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${slidesHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-bar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="left-actions">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="action-icon" onclick="toggleHeart(this)" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="action-icon" viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dots" id="dots-${postId}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${dotsHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="width:24px;"></div>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="likes-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://i.pravatar.cc/150?img=60" class="like-avatar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Liked by <b>you</b> and <b>others</b></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="comments-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="comment-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="comment-user">My Memory</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="comment-text">Uploaded photos from ${dateString} ğŸ“¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="timestamp">${dateKey}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  feedContainer.insertAdjacentHTML('beforeend', postHtml);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- 3. äº’å‹•åŠŸèƒ½ (æ„›å¿ƒã€è¼ªæ’­æ›´æ–°) ---
Â  Â  Â  Â Â 
Â  Â  Â  Â  function toggleHeart(el) {
Â  Â  Â  Â  Â  Â  el.classList.toggle('heart-filled');
Â  Â  Â  Â  }

Â  Â  Â  Â  // é€™è£¡ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹åŸæœ¬çš„ updateDotsï¼Œå› ç‚ºç¾åœ¨æ¯å€‹ Slider éƒ½æœ‰ç¨ç‰¹çš„ ID
Â  Â  Â  Â  function updateDots(postId, totalPhotos) {
Â  Â  Â  Â  Â  Â  const slider = document.getElementById(`slider-${postId}`);
Â  Â  Â  Â  Â  Â  const dotsContainer = document.getElementById(`dots-${postId}`);
Â  Â  Â  Â  Â  Â  const counter = document.getElementById(`counter-${postId}`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if(!slider) return;

Â  Â  Â  Â  Â  Â  const scrollLeft = slider.scrollLeft;
Â  Â  Â  Â  Â  Â  const width = slider.clientWidth;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // è¨ˆç®—ç¾åœ¨åœ¨ç¬¬å¹¾å¼µ
Â  Â  Â  Â  Â  Â  const index = Math.round(scrollLeft / width);

Â  Â  Â  Â  Â  Â  // æ›´æ–°å³ä¸Šè§’æ•¸å­—
Â  Â  Â  Â  Â  Â  if(counter) {
Â  Â  Â  Â  Â  Â  Â  Â  counter.innerText = `${index + 1}/${totalPhotos}`;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // æ›´æ–°åœ“é» active ç‹€æ…‹
Â  Â  Â  Â  Â  Â  if(dotsContainer) {
Â  Â  Â  Â  Â  Â  Â  Â  const dots = dotsContainer.children;
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < dots.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (i === index) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dots[i].classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dots[i].classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // åˆå§‹åŒ–
Â  Â  Â  Â  renderFeed();

Â  Â  </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>Social Feed</title>
Â  Â  <style>
Â  Â  Â  Â  /* --- 1. åŸºç¤è¨­å®š (å®Œå…¨ä¿ç•™åŸæœ¬æ¨£å¼) --- */
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: #F3ECE5; /* ç±³è‰²èƒŒæ™¯ */
Â  Â  Â  Â  Â  Â  color: #000;
Â  Â  Â  Â  Â  Â  padding-bottom: 80px; /* é ç•™åº•éƒ¨ç©ºé–“ */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* éš±è—æ²è»¸ä½†å…è¨±æ²å‹• */
Â  Â  Â  Â  body::-webkit-scrollbar { display: none; }

Â  Â  Â  Â  /* --- 2. è²¼æ–‡å¡ç‰‡ (Post) --- */
Â  Â  Â  Â  .post {
Â  Â  Â  Â  Â  Â  background-color: #F3ECE5; /* èˆ‡èƒŒæ™¯èåˆ */
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  padding-bottom: 15px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid rgba(0,0,0,0.05); /* æ·¡æ·¡çš„åˆ†éš”ç·š */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Header: é ­åƒã€åå­—ã€åœ°é» --- */
Â  Â  Â  Â  .post-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .user-info {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .avatar {
Â  Â  Â  Â  Â  Â  width: 36px;
Â  Â  Â  Â  Â  Â  height: 36px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(0,0,0,0.1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .user-text {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }

Â  Â  Â  Â  .username-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 3px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .username {
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  color: #000;
Â  Â  Â  Â  }

Â  Â  Â  Â  .bell-icon {
Â  Â  Â  Â  Â  Â  color: #E03E3E; /* ç´…è‰²éˆ´éº */
Â  Â  Â  Â  }

Â  Â  Â  Â  .location {
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  }

Â  Â  Â  Â  .more-btn {
Â  Â  Â  Â  Â  Â  color: #000;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Image Slider: å¤šåœ–è¼ªæ’­ --- */
Â  Â  Â  Â  .image-container {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  aspect-ratio: 4/5; /* IG å¸¸ç”¨çš„é•·æ–¹å½¢æ¯”ä¾‹ */
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  background-color: #e0d5cc; /* åœ–ç‰‡è¼‰å…¥å‰çš„åº•è‰² */
Â  Â  Â  Â  }

Â  Â  Â  Â  .slider {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  overflow-x: scroll;
Â  Â  Â  Â  Â  Â  scroll-snap-type: x mandatory;
Â  Â  Â  Â  Â  Â  scrollbar-width: none; /* Firefox */
Â  Â  Â  Â  }
Â  Â  Â  Â  .slider::-webkit-scrollbar { display: none; } /* Chrome/Safari */

Â  Â  Â  Â  .slide-img {
Â  Â  Â  Â  Â  Â  flex: 0 0 100%;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  scroll-snap-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* å³ä¸Šè§’å¼µæ•¸è¨ˆæ•¸å™¨ (1/3) */
Â  Â  Â  Â  .page-counter {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 15px;
Â  Â  Â  Â  Â  Â  right: 15px;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 4px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- Actions: æ„›å¿ƒã€ç•™è¨€ã€å°åœ“é» --- */
Â  Â  Â  Â  .action-bar {
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .left-actions {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 16px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .action-icon {
Â  Â  Â  Â  Â  Â  width: 24px;
Â  Â  Â  Â  Â  Â  height: 24px;
Â  Â  Â  Â  Â  Â  stroke: #000;
Â  Â  Â  Â  Â  Â  fill: none;
Â  Â  Â  Â  Â  Â  stroke-width: 2;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: transform 0.1s;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .action-icon:active { transform: scale(0.9); }

Â  Â  Â  Â  /* æ„›å¿ƒè¢«é»æ“Šå¾Œçš„æ¨£å¼ */
Â  Â  Â  Â  .heart-filled {
Â  Â  Â  Â  Â  Â  fill: #ED4956;
Â  Â  Â  Â  Â  Â  stroke: #ED4956;
Â  Â  Â  Â  Â  Â  animation: pop 0.3s ease-out;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes pop { 0%{transform:scale(1);} 50%{transform:scale(1.2);} 100%{transform:scale(1);} }

Â  Â  Â  Â  /* ä¸­é–“çš„å°åœ“é» (Pagination Dots) */
Â  Â  Â  Â  .dots {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  Â  Â  position: absolute; /* çµ•å°å®šä½è®“å®ƒç½®ä¸­ */
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  Â  }

Â  Â  Â  Â  .dot {
Â  Â  Â  Â  Â  Â  width: 6px;
Â  Â  Â  Â  Â  Â  height: 6px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  background-color: rgba(0,0,0,0.2);
Â  Â  Â  Â  Â  Â  transition: background-color 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .dot.active { background-color: #0089FF; /* IG çš„è—è‰² */ }


Â  Â  Â  Â  /* --- Likes & Comments --- */
Â  Â  Â  Â  .likes-section {
Â  Â  Â  Â  Â  Â  padding: 0 15px;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .like-avatar {
Â  Â  Â  Â  Â  Â  width: 16px;
Â  Â  Â  Â  Â  Â  height: 16px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ç•™è¨€å€ (åŒ…å«ä½œè€…ç™¼æ–‡) --- */
Â  Â  Â  Â  .comments-section {
Â  Â  Â  Â  Â  Â  padding: 0 15px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comment-row {
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comment-user {
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  margin-right: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comment-text {
Â  Â  Â  Â  Â  Â  color: #111;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .timestamp {
Â  Â  Â  Â  Â  Â  font-size: 10px;
Â  Â  Â  Â  Â  Â  color: #888;
Â  Â  Â  Â  Â  Â  margin-top: 4px;
Â  Â  Â  Â  Â  Â  padding: 0 15px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* è¼‰å…¥ä¸­/ç„¡è³‡æ–™æç¤º */
Â  Â  Â  Â  #status-msg {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-top: 50px;
Â  Â  Â  Â  Â  Â  color: #888;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }

Â  Â  </style>
</head>
<body>

Â  Â  <div id="dynamic-feed"></div>

Â  Â  <div id="status-msg">Loading memories...</div>

Â  Â  <script>
Â  Â  Â  Â  // --- 1. è³‡æ–™åº«é€£ç·š (IndexedDB) ---
Â  Â  Â  Â  // é€™æ˜¯è·Ÿä¹‹å‰ã€Œé¦–é ã€èˆ‡ã€Œæ—¥æ›†ã€å®Œå…¨ä¸€æ¨£çš„è¨­å®šï¼Œç¢ºä¿èƒ½æŠ“åˆ°åŒä¸€ä»½è³‡æ–™
Â  Â  Â  Â  const dbName = "MemoriesDB";
Â  Â  Â  Â  const storeName = "photos";
Â  Â  Â  Â  let db;

Â  Â  Â  Â  function initDB() {
Â  Â  Â  Â  Â  Â  return new Promise((resolve, reject) => {
Â  Â  Â  Â  Â  Â  Â  Â  const request = indexedDB.open(dbName, 1);
Â  Â  Â  Â  Â  Â  Â  Â  request.onsuccess = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  db = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(db);
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  request.onerror = (e) => reject(e);
Â  Â  Â  Â  Â  Â  Â  Â  request.onupgradeneeded = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  db = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!db.objectStoreNames.contains(storeName)) db.createObjectStore(storeName);
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function getAllMemories() {
Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!db) return resolve({});
Â  Â  Â  Â  Â  Â  Â  Â  const tx = db.transaction([storeName], "readonly");
Â  Â  Â  Â  Â  Â  Â  Â  const store = tx.objectStore(storeName);
Â  Â  Â  Â  Â  Â  Â  Â  const req = store.get("all_photos");
Â  Â  Â  Â  Â  Â  Â  Â  req.onsuccess = (e) => resolve(e.target.result || {});
Â  Â  Â  Â  Â  Â  Â  Â  req.onerror = () => resolve({});
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- 2. æ¸²æŸ“è²¼æ–‡é‚è¼¯ ---
Â  Â  Â  Â  async function renderFeed() {
Â  Â  Â  Â  Â  Â  await initDB();
Â  Â  Â  Â  Â  Â  const memories = await getAllMemories();
Â  Â  Â  Â  Â  Â  const feedContainer = document.getElementById('dynamic-feed');
Â  Â  Â  Â  Â  Â  const statusMsg = document.getElementById('status-msg');

Â  Â  Â  Â  Â  Â  // æ¸…ç©ºå®¹å™¨
Â  Â  Â  Â  Â  Â  feedContainer.innerHTML = '';

Â  Â  Â  Â  Â  Â  // å–å¾—æ‰€æœ‰æ—¥æœŸä¸¦æ’åº (æ–°çš„æ—¥æœŸåœ¨ä¸Šé¢)
Â  Â  Â  Â  Â  Â  const sortedDates = Object.keys(memories).sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  return new Date(b.replace(/-/g, '/')) - new Date(a.replace(/-/g, '/'));
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (sortedDates.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  statusMsg.innerHTML = "No photos found.<br>Go to Home or Calendar to upload first.";
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  statusMsg.style.display = 'none';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // é‡å°æ¯ä¸€å¤©ç”¢ç”Ÿä¸€ç¯‡è²¼æ–‡
Â  Â  Â  Â  Â  Â  sortedDates.forEach(dateKey => {
Â  Â  Â  Â  Â  Â  Â  Â  const photos = memories[dateKey]; // é€™æ˜¯ä¸€å€‹åŒ…å«ç…§ç‰‡ Base64 çš„é™£åˆ—
Â  Â  Â  Â  Â  Â  Â  Â  if (!photos || photos.length === 0) return;

Â  Â  Â  Â  Â  Â  Â  Â  // ç”¢ç”Ÿå”¯ä¸€çš„ ID (ç”¨æ—¥æœŸå­—ä¸²å»é™¤ç¬¦è™Ÿ)
Â  Â  Â  Â  Â  Â  Â  Â  const postId = dateKey.replace(/-/g, '');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // è½‰æ›æ—¥æœŸæ ¼å¼ (ä¾‹: 2024-12-25 -> December 25, 2024)
Â  Â  Â  Â  Â  Â  Â  Â  const dateObj = new Date(dateKey.replace(/-/g, '/'));
Â  Â  Â  Â  Â  Â  Â  Â  const dateString = dateObj.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

Â  Â  Â  Â  Â  Â  Â  Â  // 1. æº–å‚™åœ–ç‰‡ HTML (Slider)
Â  Â  Â  Â  Â  Â  Â  Â  let slidesHtml = '';
Â  Â  Â  Â  Â  Â  Â  Â  let dotsHtml = '';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  photos.forEach((photoBase64, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  slidesHtml += `<img src="${photoBase64}" class="slide-img">`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // åªæœ‰ç•¶ç…§ç‰‡å¤§æ–¼1å¼µæ™‚æ‰éœ€è¦ç”Ÿæˆ active ç‹€æ…‹çš„é‚è¼¯
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (photos.length > 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dotsHtml += `<div class="dot ${index === 0 ? 'active' : ''}"></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // 2. æº–å‚™è¨ˆæ•¸å™¨ HTML (å¦‚æœåªæœ‰ä¸€å¼µåœ–å°±ä¸é¡¯ç¤º)
Â  Â  Â  Â  Â  Â  Â  Â  const counterHtml = photos.length > 1 ?Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<div class="page-counter" id="counter-${postId}">1/${photos.length}</div>` : '';

Â  Â  Â  Â  Â  Â  Â  Â  // 3. çµ„åˆå®Œæ•´çš„ Post HTML (ä½¿ç”¨ä½ åŸæœ¬çš„ Class)
Â  Â  Â  Â  Â  Â  Â  Â  const postHtml = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="post">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="post-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://i.pravatar.cc/150?img=12" class="avatar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="username-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="username">My Memory</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="bell-icon" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="location">${dateString}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="more-btn"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="image-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${counterHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="slider" id="slider-${postId}" onscroll="updateDots('${postId}', ${photos.length})">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${slidesHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-bar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="left-actions">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="action-icon" onclick="toggleHeart(this)" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="action-icon" viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dots" id="dots-${postId}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${dotsHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="width:24px;"></div>Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="likes-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://i.pravatar.cc/150?img=60" class="like-avatar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Liked by <b>you</b> and <b>others</b></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="comments-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="comment-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="comment-user">My Memory</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="comment-text">Uploaded photos from ${dateString} ğŸ“¸</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="timestamp">${dateKey}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  feedContainer.insertAdjacentHTML('beforeend', postHtml);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- 3. äº’å‹•åŠŸèƒ½ (æ„›å¿ƒã€è¼ªæ’­æ›´æ–°) ---
Â  Â  Â  Â Â 
Â  Â  Â  Â  function toggleHeart(el) {
Â  Â  Â  Â  Â  Â  el.classList.toggle('heart-filled');
Â  Â  Â  Â  }

Â  Â  Â  Â  // é€™è£¡ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹åŸæœ¬çš„ updateDotsï¼Œå› ç‚ºç¾åœ¨æ¯å€‹ Slider éƒ½æœ‰ç¨ç‰¹çš„ ID
Â  Â  Â  Â  function updateDots(postId, totalPhotos) {
Â  Â  Â  Â  Â  Â  const slider = document.getElementById(`slider-${postId}`);
Â  Â  Â  Â  Â  Â  const dotsContainer = document.getElementById(`dots-${postId}`);
Â  Â  Â  Â  Â  Â  const counter = document.getElementById(`counter-${postId}`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if(!slider) return;

Â  Â  Â  Â  Â  Â  const scrollLeft = slider.scrollLeft;
Â  Â  Â  Â  Â  Â  const width = slider.clientWidth;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // è¨ˆç®—ç¾åœ¨åœ¨ç¬¬å¹¾å¼µ
Â  Â  Â  Â  Â  Â  const index = Math.round(scrollLeft / width);

Â  Â  Â  Â  Â  Â  // æ›´æ–°å³ä¸Šè§’æ•¸å­—
Â  Â  Â  Â  Â  Â  if(counter) {
Â  Â  Â  Â  Â  Â  Â  Â  counter.innerText = `${index + 1}/${totalPhotos}`;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // æ›´æ–°åœ“é» active ç‹€æ…‹
Â  Â  Â  Â  Â  Â  if(dotsContainer) {
Â  Â  Â  Â  Â  Â  Â  Â  const dots = dotsContainer.children;
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < dots.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (i === index) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dots[i].classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dots[i].classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // åˆå§‹åŒ–
Â  Â  Â  Â  renderFeed();

Â  Â  </script>
</body>
</html>
