<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>User Profile</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: #F3ECE5; /* 米色背景 */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #8C7B6D; /* 統一的深褐字體色 */
        }

        
        /* ----- 頂部區域 (Top Bar) ----- */
        .header {
            padding: 40px 24px 10px 24px;
            display: flex;
            align-items: center;
        }

        /* 返回按鈕 (圓形) */
        .back-btn {
            width: 44px;
            height: 44px;
            background-color: rgba(156, 124, 102, 0.2); /* 半透明棕色 */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            text-decoration: none; /* 去除連結底線 */
            color: white;
        }

        /* ----- 個人資訊區 (Avatar & Info) ----- */
        .profile-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 40px;
        }

        .avatar-large {
            width: 100px;
            height: 100px;
            background-color: #F8F4F0; /* 略白的圓圈 */
            border-radius: 50%;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .user-name {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 1px;
            color: #8C735D;
            margin-bottom: 5px;
        }

        .user-email {
            font-size: 14px;
            color: #A69688;
        }

        /* ----- 選單列表 (Menu List) ----- */
        .menu-list {
            padding: 0 40px;
            flex: 1; /* 讓這塊佔據中間空間 */
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 18px 0;
            font-size: 18px;
            font-weight: 500;
            color: #8C7B6D;
            cursor: pointer;
        }

        .menu-item svg {
            width: 24px;
            height: 24px;
            margin-right: 20px;
            stroke: #8C7B6D;
            stroke-width: 2;
        }

        /* ----- 底部登出 (Log Out) ----- */
        .footer {
            padding: 20px 40px 60px 40px;
            display: flex;
            justify-content: center;
        }

        .logout-btn {
            width: 100%;
            max-width: 300px;
            height: 56px;
            background-color: #C4B09B; /* 淺棕色按鈕 */
            color: white;
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        /* --- 訂閱鈴鐺樣式 --- */
        .subscribe-box {
            display: flex; flex-direction: column; align-items: center; gap: 10px; margin-bottom: 40px;
        }
        
        .bell-btn {
            width: 60px; height: 60px;
            border-radius: 50%;
            background-color: #E0D5CC; /* 預設灰色 */
            border: none;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .bell-btn svg { width: 30px; height: 30px; fill: #fff; stroke: #fff; }

        /* 啟用狀態 (紅色) */
        .bell-btn.active {
            background-color: #d32f2f; /* 紅色 */
            box-shadow: 0 4px 15px rgba(211, 47, 47, 0.4);
            animation: ring 0.5s ease;
        }

        .status-text { font-size: 12px; color: #998A7D; font-weight: 600; }

        /* 回首頁按鈕 */
        .home-link { position: absolute; top: 20px; left: 20px; text-decoration: none; color: #6D5D50; font-weight: 600; }

        @keyframes ring { 0%{transform:rotate(0)} 25%{transform:rotate(15deg)} 50%{transform:rotate(-15deg)} 75%{transform:rotate(5deg)} 100%{transform:rotate(0)} }
    </style>
</head>
<body>

    <div class="header">
        <a href="home.html" class="back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
        </a>
    </div>

    <div class="profile-section">
        <div class="avatar-large"></div> <div class="user-name">TTTTT</div>
        <div class="user-email">YYYT.gmail.com</div>
    </div>

    <div class="menu-list">
        <div class="menu-item">
            <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            My Profile
        </div>
        <div class="subscribe-box">
            <button class="bell-btn" id="bellBtn" onclick="handleSubscription()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
            </button>
            <span class="status-text" id="statusText">Tap to Subscribe</span>
        </div>
    
        <button onclick="localStorage.removeItem('isPremium'); location.reload();" style="margin-top:50px; padding:10px; background:none; border:1px solid #ccc; color:#999; border-radius:5px;">Reset Membership (Debug)</button>
        <div class="menu-item">
            <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
            Address
        </div>
        <div class="menu-item">
            <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
            Contact Us
        </div>
        <div class="menu-item">
            <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            Setting
        </div>
        <div class="menu-item">
            <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            Help&QA
        </div>
    </div>

    <div class="footer">
        <button class="logout-btn" onclick="handleLogout()">Log Out</button>
    </div>

    <script>
        function handleLogout() {
            
            // 1. 強制讓「最外層」視窗跳轉到登入頁
            // 使用 window.top 才能跳脫 iframe 的框架
            window.top.location.href = 'login.html'; 
        }

        const bellBtn = document.getElementById('bellBtn');
        const statusText = document.getElementById('statusText');

        // 1. 頁面載入時檢查狀態
        function checkStatus() {
            const isPremium = localStorage.getItem('isPremium');
            
            if (isPremium === 'true') {
                // 已付款：變紅
                bellBtn.classList.add('active');
                statusText.textContent = "Premium Member";
                statusText.style.color = "#d32f2f";
            } else {
                // 未付款：預設
                bellBtn.classList.remove('active');
                statusText.textContent = "Tap to Subscribe";
                statusText.style.color = "#998A7D";
            }
        }

        // 2. 點擊鈴鐺邏輯
        function handleSubscription() {
            const isPremium = localStorage.getItem('isPremium');
            
            if (isPremium === 'true') {
                // 已經是會員了，什麼都不做，或者跳提示
                // alert("You are already a premium member!");
            } else {
                // 還不是會員，跳轉去付款頁面
                window.location.href = "payment.html";
            }
        }

        // 初始化
        checkStatus();
    </script>
</body>
</html>
