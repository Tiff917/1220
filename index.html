<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Swipe App Container</title>
    <style>
        /* 1. 歸零 */
        * { margin: 0; padding: 0; box-sizing: border-box; border: 0; outline: 0; }

        /* 2. 背景設定 (確保跟 App 同色) */
        html, body {
            width: 100%; height: 100%;
            background-color: #F3ECE5; /* 關鍵：米色背景 */
            overflow: hidden;
        }

        /* 3. 滑動容器 */
        .app-container {
            display: flex;
            flex-wrap: nowrap;
            width: 101%; height: 100%;
            
            overflow-x: scroll; 
            overflow-y: hidden;
            scroll-snap-type: x mandatory;
            
            background-color: #F3ECE5; /* 容器也設米色 */
            
            scrollbar-width: none; 
            -ms-overflow-style: none;
            scroll-behavior: auto;
        }
        .app-container::-webkit-scrollbar { display: none; }

        /* 4. iframe 設定 */
        iframe {
            display: block;
            /* 設為 100% 寬度 */
            min-width: 100.5%; 
            width: 100.5%;
            height: 100%;
            
            /* 關鍵：強制移除所有邊框和陰影 */
            border: none !important;
            box-shadow: none !important;
            
            background-color: #F3ECE5;
            scroll-snap-align: start; 
            scroll-snap-stop: always;
        }

        /* 5. 終極修正：相鄰的 iframe 往左擠 */
        /* 只要不是第一個 iframe，全部往左拉 2px，蓋住上一張的邊緣 */
        iframe + iframe {
            margin-left: -4px;
        }

    </style>
</head>
<body>
    
    <div class="app-container" id="appContainer">
        <iframe src="memories.html" frameborder="0"></iframe>
        <iframe src="home.html" id="homeFrame" frameborder="0"></iframe>
        <iframe src="social.html" frameborder="0"></iframe>
    </div>

    <script>
        const container = document.getElementById('appContainer');
        const homeFrame = document.getElementById('homeFrame');

        // 1. 初始化定位 (回到中間的 home.html)
        window.onload = function() {
            setTimeout(() => {
                if(container && homeFrame) {
                    container.scrollLeft = homeFrame.offsetLeft;
                }
            }, 10);
        };

        // 2. ★ 智慧鎖定邏輯 (加強版) ★
        // 每 0.1 秒檢查一次目前 homeFrame 裡面顯示的是哪個檔案
        setInterval(function() {
            let shouldLock = false; // 預設不鎖定 (可以滑)

            try {
                // 抓取目前中間 iframe 載入的網址
                const currentUrl = homeFrame.contentWindow.location.href.toLowerCase();
                
                // ★ 關鍵清單：這些頁面出現時，禁止左右滑動
                const lockList = [
                    'login.html', 
                    'signup.html', 
                    'forgot-password.html',
                    'profile.html',
                    'payment.html',
                    'otp_verify.html',
                    'reset_password.html',
                    'search.html', 
                    'edit.html', 
                    'message.html',
                    'onboarding.html'
                ];

                // 檢查目前網址是否包含上述任何一個關鍵字
                if (lockList.some(page => currentUrl.includes(page))) {
                    shouldLock = true;
                }

            } catch (e) {
                // 跨網域存取可能會報錯，這裡忽略
                console.log("Cross-origin error or loading:", e);
            }

            // 執行鎖定或解鎖
            if (shouldLock) {
                // 鎖定：隱藏捲軸，並強制定位在中間 iframe
                if (container.style.overflowX !== 'hidden') {
                    container.style.overflowX = 'hidden';
                    container.scrollLeft = homeFrame.offsetLeft; // 強制拉回中間
                }
            } else {
                // 解鎖：恢復可滑動狀態 (回到 home.html 時)
                if (container.style.overflowX !== 'scroll') {
                    container.style.overflowX = 'scroll';
                }
            }
      

    </script>
</body>
</html>
